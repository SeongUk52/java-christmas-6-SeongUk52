# 프리코스 4주차 미션 - 크리스마스 프로모션🎄

# 패키지 의존 다이어그램

![패키지_다이어그램.png](images%2F%ED%8C%A8%ED%82%A4%EC%A7%80_%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8.png)

# ✏️기능 목록

---

# ‼️핵심 기능‼️

> - 할인 데이터
> - [x] `날짜를 바탕으로 혜택 금액을 계산하는 기능`

## 도메인 👤

- 키오스크
    - [x] 할인 전 총 주문 금액을 계산하는 기능
    - [x] 고객에게 안내할 주의사항에 따라 예외처리 혹은 이벤트 미적용현할지 판단하는 기능
    - [x] 이벤트 주의 사항에 따라 생성후 예외처리


- 상품(음식)
    - [x] 1이상의 숫자가 아닐 경우 예외처리하는 기능
    - [x] 메뉴 형식이 예시와 다른 경우 예외처리하는 기능
    - [x] 주문 금액을 계산하는 기능


- 상품들
    - [x] 중복 메뉴를 입력한 경우 예외처리하는 기능


- 혜택 관리자
    - [x] 할인 전 총 주문 금액을 조건으로 할인, 증정품 목록을 생성하는 기능
    - [x] 혜택 내역들을 문자열 리스트로 변환하는 기능
    - [x] 총 혜택 금액을 계산하는 기능


- 할인
    - [x] 할인 내역을 문자열로 변환하는 기능

## 유틸리티🏭

- 날짜 공장
    - [x] String값을 사용해 java.time.LocalDate를 생성하는 기능
    - [x] 1 이상 31 이하의 숫자가 아닐 경우 예외처리하는 기능


- 패턴 공장
    - [x] 정규식 상수패턴을 사용해서 숫자 입력인지 판별하는 기능

## 뷰 🖥️⌨️

### 입력

- [x] 식당 예상 방문일자를 입력받는 기능
    - [x] 숫자가 아닐 경우 예외처리하는 기능


- [x] 메뉴와 개수를 입력받는 기능

### 출력

- [x] 에러 메시지를 출력하는 기능


- [x] 해당 날짜의 이벤트 혜택 미리보기를 출력하는 기능
    - [x] 주문 메뉴 목록을 출력하는 기능
    - [x] 할인 전 총주문 금액을 출력하는 기능
    - [x] 증정 메뉴를 출력하는 기능
    - [x] 혜택 내역을 출력하는 기능
    - [x] 총혜택 금액을 출력하는 기능
    - [x] 할인 후 예상 결재 금액을 출력하는 기능
    - [x] 12월 이벤트 배지를 출력하는 기능

## 컨트롤러 🕹️

- [x] 뷰와 도메인을 연결하는 기능
    - [x] 이벤트 주의 사항 조건에 따라 할인을 적용하지 않는 기능

## 데이터

- [x] 메뉴 (이름, 가격, 카테고리)
    - [x] 메뉴판에 메뉴가 없을 경우 예외처리하는 기능
- [x] 할인 (이름, 할인 가격(조건식))
    - `[x] 날짜를 바탕으로 혜택 금액을 계산하는 기능`
- [x] 증정 이벤트 조건 (조건식)
- [x] 이벤트 배지 (조건식)
- [x] 고객에게 안내할 이벤트 주의 사항 (조건식, 카테고리)

## 상수

- [x] 예외 메시지 (문자열)
- [x] 시스템 메시지 (문자열)
- [x] 시스템 문자열 상수 (문자열)
- [x] 시스템 상수 (정수)

# 기록📝

- 2023-11-13 23:42) 단순히 상수를 저장할 뿐 아니라 조건식이 있거나 복합적인 값을 저장하는
  enum은 constant가 아니라 data로 분류하기로 했다.

# 👆4주차 미션 특기할 요구사항

---

> 이번 4주 차 미션에서는 3주 차 미션의 학습 목표인 클래스(객체)를 분리하는 연습을 조금 더 살펴볼게요.

> - InputView, OutputView 클래스를 참고하여 입출력 클래스를 구현한다.
> - 입력과 출력을 담당하는 클래스를 별도로 구현한다.
> - 해당 클래스의 패키지, 클래스명, 메서드의 반환 타입과 시그니처는 자유롭게 구현할 수 있다.

# 😀 3 주차 반성📕

---

- 3주차 미션을 진행하면서 미션 요구사항을 2개나 놓쳐버렸다. 이번엔 절대 실수하지 않도록 꼼꼼히 요구사항을 살펴봐야겠다.


- 변수명에 오타가 있었다. 이는 사소해보이지만 큰 실수다. 이름을 지을 땐 항상 신중해야겠다.


- Controller 에서는 정적 팩토리 메서드를 사용해서 캡슐화 하는 대신 시스템의 정책에 따라 새로운 의존성을 주입받을 수
  있도록 생성자를 열어두라는 피드백을 받았다. 확장성을 고려할 수 있어서 매우 좋은 방법이라고 생각된다.


- 3주차 미션을 진행하면서 도메인에서 뷰를 의존한 부분이 있었다. 도메인은 도메인 자체로 존재하고 뷰는 도메인을 의존할 수 있지만
  `도메인은 뷰를 의존해서는 안 되며` 컨트롤러는 둘의 사이를 이어주는 역할을 해야한다는 피드백을 받았다. 레이어 간의 의존관계를 잘
  파악해야겠다.


- 각 도메인의 역할을 잘 생각해봐야겠다. 예를 들어 돈을 받고 로또를 파는 도메인은 Lottos보다는 Store나 LottoMachine이 더 적합하다.


- 여러 메서드를 만들어서 중복되는 코드로 여러 값을 테스트했었는데
  @ParametrizedTest를 사용해서 여러 값을 한 테스트 메서드로 테스트해야겠다.


- 불변 리스트를 사용해서 값이 변하는 것을 막자.


- 정규식을 사용할 때 static Pattern을 사용하면 성능을 향상시킬 수 있다는 피드백을 받았다.


- 10_000같은 숫자 포맷을 적극 활용해야겠다.


- 상수를 저장하는 enum 자체에 람다식을 사용해 상수에 조건문을 넣은 코드를 봤다. 매우 좋은 방법으로 보인다.


- 밤을 새서 코딩하니까 정신력이 현저하게 떨어지고 실수를 반복했다. 코딩도 좋지만 몸도 생각하자! 👍


- 3주차 미션을 진행할 때는 테스트 커버리지를 확인하는 방법을 몰랐다.
    - 테스트 커버리지를 확인하는 방법을 알게된 덕분에
      이번에는 메서드 뿐 아니라 모든 줄에 대한 커버리지를 100%를 채웠다.

# 추가로 생각해볼 점 🤔

- `중복된 할인과 증정을 허용해서, 고객들이 혜택을 많이 받는다는 것을 체감할 수 있게 하는 것`
    - 다른 이벤트에서는 추가적인 증정품이 있을 수 있음을 암시하는 것 같다. 확장성을 고려할 필요가 있다.


- `올해 12월에 지난 5년 중 최고의 판매 금액을 달성`
    - 이벤트 플래너는 계획하고 할인을 얼마나 받을 수 있는지 보여주는 것이지 실제로 결재가 되진 않기
      때문에 이번 프로젝트 내에서는 할 수 있는게 없다.


- `12월 이벤트 참여 고객의 5%가 내년 1월 새해 이벤트에 재참여하는 것`
    - 내년에도 이벤트가 있다는 뜻이므로 1월 이벤트에 코드를 재사용할 수 있어야 한다.
        - 이미 혜택 조건들을 상수화 해놨기 때문에 1월에는 1월에 맞는 상수를 넣어주면 된다.
    - 이벤트 배지를 1월에 활용한다는데 1월에 재사용될 코드에는 배지의 종류에 따라 조건이 바뀌도록 해야한다.

